services:
  - type: web
    name: n8n
    env: docker
    plan: starter
    region: frankfurt                  # choisis ta rÃ©gion (Frankfurt = EU)
    autoDeploy: true                   # redeploiement auto quand tu pousses du code
    dockerfilePath: ./Dockerfile       # Render utilisera ton Dockerfile

    # ğŸ“¦ Ajout dâ€™un disque persistant (1 Go)
    disk:
      - name: data
        mountPath: /home/node/.n8n     # dossier oÃ¹ n8n stocke ses fichiers
        sizeGB: 1

    envVars:
      # ğŸŒ Configuration gÃ©nÃ©rale
      - key: GENERIC_TIMEZONE
        value: Europe/Paris
      - key: N8N_PROTOCOL
        value: https
      - key: N8N_PORT
        value: "5678"

      # ğŸ–¥ï¸ Remplace par ton nom dâ€™app Render (ex: mon-n8n.onrender.com)
      - key: N8N_HOST
        value: n8n-appv.onrender.com
      - key: WEBHOOK_URL
        value: https://ton-app.onrender.com

      # ğŸ” ClÃ© de chiffrement (gÃ©nÃ©rÃ©e automatiquement)
      - key: N8N_ENCRYPTION_KEY
        generateValue: true

      # ğŸ“Š DÃ©sactiver la tÃ©lÃ©mÃ©trie
      - key: N8N_DIAGNOSTICS_ENABLED
        value: "false"

      # ğŸ”’ SÃ©curiser lâ€™accÃ¨s Ã  ton instance avec Basic Auth
      - key: N8N_BASIC_AUTH_ACTIVE
        value: "true"
      - key: N8N_BASIC_AUTH_USER
        value: admin
      - key: N8N_BASIC_AUTH_PASSWORD
        generateValue: true
